{"noir_version":"0.36.0+801c71880ecf8386a26737a5d8bb5b4cb164b2ab","hash":15621682588284328295,"abi":{"parameters":[{"name":"current_price","type":{"kind":"integer","sign":"unsigned","width":64},"visibility":"public"},{"name":"intent_id_hash","type":{"kind":"field"},"visibility":"public"},{"name":"condition_met","type":{"kind":"integer","sign":"unsigned","width":8},"visibility":"public"},{"name":"threshold","type":{"kind":"integer","sign":"unsigned","width":64},"visibility":"private"}],"return_type":null,"error_types":{}},"bytecode":"H4sIAAAAAAAA/91YXW+bMBQ1ENIkaHtp8zjJ0t4nm48Ab5G2l77tYX/AgFOQClRApWq/fqG1V8ewTJntqeqR0AV/HB9f+3IxFniBd7xu2L11vBxmR+ylMvt4raQyh7VzWR8bTCHyjQjQLgxp7FMcYIL8NEsiFEbZLsEJjpKo8JMgoEmYxGmWxijFYUDxIUqDA3qBI3Chy4Dlghm52rhFXyyYdWVHu8KAHI5Bh13IhSQuvNCoyzW0kLo33OLfdU7gMn0WmELWjdSALY26Rb1Lk4KXBnivNG4GU/O+EhysifdsUCA1nPgUKeKS7IHUgFW4DjTNM5LExI934/OMXCPZY8XsmjuEZ481+Hv2QGo4cZhq9lgBfYG4NrSQurPHCvyfQLHfzrq/i0+2DbMe3xQ86DbgNYXzMg9MA3GhJm4i1tSCqAb1RqMuz9BG0R0ctkYunf6zhH3HX2QOeE0KvHzubDJiKdx/ZvZH2dG+bO8LWD/2A8wovOsoGWgHh5I08Cft2rHZRuj6idnbZqDNAG+/wZL0JcxJ07TPDLzTR6HTltnvXZVTSJ9ySose1uSpqh/rseJaaPyF2a9tU1RD1TbwcE/uYNHSHo5j1GTIS/jwTJW39QPpqr5tfs/7JKMK4sUz7QikBp/ze2b4kfjVCKS5iONy8PkvZvpZf3i2JXuu7bljzYeZOs55PVO2lqz8n2LPnpEaMOffmuGfXaMb4X4rzVP0816TBs7H3wMumMKW6nhbOVYs/fqwrMWZGYtD3Cu8/hcQZDOp0BIAAA==","debug_symbols":"ndPNDoMgDAfwd+nZA/UD0VdZFoOKhoSgUVyyGN99bNPEOS5w49/mx6XtCq2ol76SuhtmKG8rqKHhRg7aphWST2keuX6n2fDJQMkojUDo1r7yYougk0pAmZPtHkHqCzJfQH1B7gJIMNsFkiS9EOZPCn+CJMCg0yCNDxMTvJo4wCQBJg0wzvljwo55Yop/hgaYPMCwAOPeA0rIYWj8u6A21JNUSvbV+fRs+cEnyWsl9tgtujl1zXP8duwXLw==","file_map":{"70":{"source":"// Price Condition Circuit\n// Proves: currentPrice < threshold WITHOUT revealing threshold\n//\n// Use Case: AI Agent proves price condition is met without exposing\n// the exact threshold to observers\n//\n// Public Inputs:\n//   - current_price: u64 (price * 1e8, e.g., 0.10 USD = 10_000_000)\n//   - intent_id_hash: Field (keccak256 of intentId, prevents replay)\n//   - condition_met: u8 (1 if condition is true, 0 otherwise)\n//\n// Private Inputs:\n//   - threshold: u64 (price threshold * 1e8, NEVER revealed)\n\nfn main(\n    // Public inputs (visible to everyone)\n    current_price: pub u64,\n    intent_id_hash: pub Field,\n    condition_met: pub u8,\n    // Private inputs (hidden in the proof)\n    threshold: u64\n) {\n    // Constraint 1: Threshold must be positive (prevent zero threshold attacks)\n    // Check this FIRST before any computation with threshold\n    assert(threshold > 0, \"Threshold must be greater than zero\");\n\n    // Constraint 2: Intent ID hash must be non-zero (binding to specific intent)\n    assert(intent_id_hash != 0, \"Intent ID hash cannot be zero\");\n\n    // Constraint 3: Current price must be reasonable (< 1 trillion USD in 1e8)\n    assert(current_price < 100_000_000_000_000_000, \"Price exceeds maximum\");\n\n    // Constraint 4: Verify the condition_met flag is correct\n    // The prover claims condition_met, we verify it matches reality\n    let price_is_below = current_price < threshold;\n\n    // Convert bool to u8 for comparison\n    let expected_met: u8 = if price_is_below { 1 } else { 0 };\n\n    // Assert the public condition_met matches the actual computation\n    assert(condition_met == expected_met, \"Condition flag does not match price comparison\");\n}\n\n#[test]\nfn test_price_below_threshold() {\n    // Current price: 0.08 USD (8_000_000 in 1e8)\n    // Threshold: 0.10 USD (10_000_000 in 1e8)\n    // Expected: condition_met = 1 (price IS below threshold)\n\n    main(\n        8_000_000,                          // current_price\n        0x1234567890abcdef1234567890abcdef, // intent_id_hash\n        1,                                   // condition_met (true)\n        10_000_000                           // threshold (private)\n    );\n}\n\n#[test]\nfn test_price_above_threshold() {\n    // Current price: 0.12 USD (12_000_000)\n    // Threshold: 0.10 USD (10_000_000)\n    // Expected: condition_met = 0 (price is NOT below threshold)\n\n    main(\n        12_000_000,                         // current_price\n        0x1234567890abcdef1234567890abcdef, // intent_id_hash\n        0,                                   // condition_met (false)\n        10_000_000                           // threshold (private)\n    );\n}\n\n#[test]\nfn test_price_equal_threshold() {\n    // Current price: 0.10 USD (10_000_000)\n    // Threshold: 0.10 USD (10_000_000)\n    // Expected: condition_met = 0 (NOT below, equal doesn't count)\n\n    main(\n        10_000_000,                         // current_price\n        0x1234567890abcdef1234567890abcdef, // intent_id_hash\n        0,                                   // condition_met (false - not BELOW)\n        10_000_000                           // threshold (private)\n    );\n}\n\n#[test(should_fail_with = \"Condition flag does not match price comparison\")]\nfn test_invalid_condition_flag() {\n    // This should fail - claiming condition is met when it's not\n    main(\n        12_000_000,                         // current_price (ABOVE threshold)\n        0x1234567890abcdef1234567890abcdef,\n        1,                                   // WRONG: claiming condition met\n        10_000_000                           // threshold\n    );\n}\n\n#[test(should_fail_with = \"Threshold must be greater than zero\")]\nfn test_zero_threshold() {\n    // This should fail - zero threshold is invalid\n    main(\n        1_000_000,\n        0x1234567890abcdef1234567890abcdef,\n        1,\n        0  // Invalid: zero threshold\n    );\n}\n\n#[test(should_fail_with = \"Intent ID hash cannot be zero\")]\nfn test_zero_intent_hash() {\n    // This should fail - zero intent hash allows replay attacks\n    main(\n        8_000_000,\n        0,  // Invalid: zero intent hash\n        1,\n        10_000_000\n    );\n}\n","path":"/Users/kevinbrenes/cronos-snowrail/circuits/price_condition/src/main.nr"}},"names":["main"],"brillig_names":["directive_integer_quotient","directive_invert"]}